{"ast":null,"code":"import moment from 'moment';\nexport default {\n  props: {\n    dialog: Boolean,\n    dialogTitle: String,\n    editedItem: Object,\n    rules: Object,\n    statusOptions: Array,\n    ordersList: Array,\n    // Добавьте это свойство, если необходимо\n    editedIndex: Number // Добавьте это свойство, если необходимо\n  },\n  data() {\n    return {\n      internalDialog: this.dialog,\n      editedItemCopy: Object.assign({}, this.editedItem),\n      menu2: false\n    };\n  },\n  methods: {\n    closeDialog() {\n      this.internalDialog = false;\n      this.$emit('update:dialog', this.internalDialog);\n    },\n    saveItem() {\n      const editedItemCopy = JSON.parse(JSON.stringify(this.editedItem)); // Глубокое копирование объекта\n      if (this.$refs.form.validate()) {\n        if (!moment(editedItemCopy.dadd).isValid()) {\n          editedItemCopy.dadd = moment().format('YYYY-MM-DD HH:mm');\n        } else {\n          editedItemCopy.dadd = moment(editedItemCopy.dadd).format('YYYY-MM-DD HH:mm');\n        }\n        if (editedItemCopy.id > -1) {\n          Object.assign(this.ordersList[this.editedIndex], editedItemCopy);\n        } else {\n          this.addNewItem(editedItemCopy);\n        }\n        this.closeDialog();\n      }\n    }\n  },\n  watch: {\n    editedItem(newVal) {\n      this.editedItemCopy = Object.assign({}, newVal);\n    },\n    dialog(newVal) {\n      this.internalDialog = newVal;\n    }\n  }\n};","map":{"version":3,"names":["moment","props","dialog","Boolean","dialogTitle","String","editedItem","Object","rules","statusOptions","Array","ordersList","editedIndex","Number","data","internalDialog","editedItemCopy","assign","menu2","methods","closeDialog","$emit","saveItem","JSON","parse","stringify","$refs","form","validate","dadd","isValid","format","id","addNewItem","watch","newVal"],"sources":["src/components/DialogEdit.vue"],"sourcesContent":["<template>\n    <v-dialog v-model=\"internalDialog\" max-width=\"600px\">\n        <v-card>\n            <v-card-title>{{ dialogTitle }}</v-card-title>\n            <v-card-text>\n                <v-form ref=\"form\">\n                    <v-text-field v-model=\"editedItemCopy.num\" :rules=\"[rules.counter, rules.numIfNonEmpty]\"\n                        label=\"№ Заявки\" required></v-text-field>\n                    <v-text-field v-model=\"editedItemCopy.stg\" :rules=\"[rules.stgCheck, rules.max20Characters]\"\n                        label=\"Продукт\" required></v-text-field>\n                    <v-row>\n                        <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                            <v-menu v-model=\"menu2\" :close-on-content-click=\"false\" :nudge-right=\"40\"\n                                transition=\"scale-transition\" offset-y min-width=\"auto\">\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <v-text-field v-model=\"editedItemCopy.dadd\" label=\"Дата\" prepend-icon=\"mdi-calendar\"\n                                        readonly v-bind=\"attrs\" v-on=\"on\"></v-text-field>\n                                </template>\n                                <v-date-picker v-model=\"editedItemCopy.dadd\" @input=\"menu2 = false\"></v-date-picker>\n                            </v-menu>\n                        </v-col>\n                    </v-row>\n                    <v-text-field v-model=\"editedItemCopy.client_name\" :rules=\"[rules.client_nameCheck]\" label=\"Клиент\"\n                        required></v-text-field>\n                    <v-row>\n                        <v-col class=\"d-flex\" cols=\"12\" sm=\"6\">\n                            <v-select v-model=\"editedItemCopy.state\" :items=\"statusOptions\" label=\"Статус\"></v-select>\n                        </v-col>\n                    </v-row>\n                    <v-text-field v-model=\"editedItemCopy.person_phone\" :rules=\"[rules.personPhoneCheck]\"\n                        label=\"Телефон\" required></v-text-field>\n                </v-form>\n            </v-card-text>\n            <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"blue darken-1\" text @click=\"closeDialog\">Отмена</v-btn>\n                <v-btn color=\"blue darken-1\" text @click=\"saveItem\">Сохранить</v-btn>\n            </v-card-actions>\n        </v-card>\n    </v-dialog>\n</template>\n\n<script>\nimport moment from 'moment';\n\nexport default {\n    props: {\n        dialog: Boolean,\n        dialogTitle: String,\n        editedItem: Object,\n        rules: Object,\n        statusOptions: Array,\n        ordersList: Array, // Добавьте это свойство, если необходимо\n        editedIndex: Number // Добавьте это свойство, если необходимо\n    },\n    data() {\n        return {\n            internalDialog: this.dialog,\n            editedItemCopy: Object.assign({}, this.editedItem),\n            menu2: false\n        };\n    },\n    methods: {\n        closeDialog() {\n            this.internalDialog = false;\n            this.$emit('update:dialog', this.internalDialog);\n        },\n        saveItem() {\n            const editedItemCopy = JSON.parse(JSON.stringify(this.editedItem)); // Глубокое копирование объекта\n            if (this.$refs.form.validate()) {\n                if (!moment(editedItemCopy.dadd).isValid()) {\n                    editedItemCopy.dadd = moment().format('YYYY-MM-DD HH:mm');\n                } else {\n                    editedItemCopy.dadd = moment(editedItemCopy.dadd).format('YYYY-MM-DD HH:mm');\n                }\n                if (editedItemCopy.id > -1) {\n                    Object.assign(this.ordersList[this.editedIndex], editedItemCopy);\n                } else {\n                    this.addNewItem(editedItemCopy);\n                }\n                this.closeDialog();\n            }\n        },\n    },\n        watch: {\n        editedItem(newVal) {\n            this.editedItemCopy = Object.assign({}, newVal);\n        },\n        dialog(newVal) {\n            this.internalDialog = newVal;\n        }\n    }\n};\n</script>\n"],"mappings":"AA2CA,OAAAA,MAAA;AAEA;EACAC,KAAA;IACAC,MAAA,EAAAC,OAAA;IACAC,WAAA,EAAAC,MAAA;IACAC,UAAA,EAAAC,MAAA;IACAC,KAAA,EAAAD,MAAA;IACAE,aAAA,EAAAC,KAAA;IACAC,UAAA,EAAAD,KAAA;IAAA;IACAE,WAAA,EAAAC,MAAA;EACA;EACAC,KAAA;IACA;MACAC,cAAA,OAAAb,MAAA;MACAc,cAAA,EAAAT,MAAA,CAAAU,MAAA,UAAAX,UAAA;MACAY,KAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA,KAAAL,cAAA;MACA,KAAAM,KAAA,uBAAAN,cAAA;IACA;IACAO,SAAA;MACA,MAAAN,cAAA,GAAAO,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,SAAA,MAAAnB,UAAA;MACA,SAAAoB,KAAA,CAAAC,IAAA,CAAAC,QAAA;QACA,KAAA5B,MAAA,CAAAgB,cAAA,CAAAa,IAAA,EAAAC,OAAA;UACAd,cAAA,CAAAa,IAAA,GAAA7B,MAAA,GAAA+B,MAAA;QACA;UACAf,cAAA,CAAAa,IAAA,GAAA7B,MAAA,CAAAgB,cAAA,CAAAa,IAAA,EAAAE,MAAA;QACA;QACA,IAAAf,cAAA,CAAAgB,EAAA;UACAzB,MAAA,CAAAU,MAAA,MAAAN,UAAA,MAAAC,WAAA,GAAAI,cAAA;QACA;UACA,KAAAiB,UAAA,CAAAjB,cAAA;QACA;QACA,KAAAI,WAAA;MACA;IACA;EACA;EACAc,KAAA;IACA5B,WAAA6B,MAAA;MACA,KAAAnB,cAAA,GAAAT,MAAA,CAAAU,MAAA,KAAAkB,MAAA;IACA;IACAjC,OAAAiC,MAAA;MACA,KAAApB,cAAA,GAAAoB,MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}