{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport MyApplications from '@/components/MyApplications.vue';\nimport MyAccounts from '@/components/MyAccounts.vue';\nimport OrderDetails from '@/components/OrderDetails.vue';\nexport default {\n  data() {\n    return {\n      activeTab: 0,\n      tabs: [{\n        label: 'Заявки',\n        component: MyApplications,\n        path: '/application'\n      }, {\n        label: 'Счета',\n        component: MyAccounts,\n        path: '/accounts'\n      }]\n    };\n  },\n  methods: {\n    navigateToOrder(item) {\n      const existingTabIndex = this.tabs.findIndex(tab => tab.label.includes(item.num));\n      if (existingTabIndex !== -1) {\n        this.activeTab = existingTabIndex;\n      } else {\n        const newTabLabel = 'Детали заявки ' + item.num;\n        const newTabKey = newTabLabel + '-' + item.orderId; // Adding orderId to ensure uniqueness\n        this.tabs.push({\n          label: newTabLabel,\n          component: OrderDetails,\n          path: '/application/' + item.orderId,\n          key: newTabKey\n        });\n        this.activeTab = this.tabs.length - 1;\n      }\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    if (to.path.startsWith('/application/') && from.path !== to.path) {\n      // Если новый маршрут начинается с '/application/' и он отличается от предыдущего маршрута\n      next({\n        path: '/application'\n      }); // Сбрасываем маршрут до основного пути '/application'\n    } else {\n      next(); // Продолжаем нормальный переход\n    }\n  },\n  created() {\n    const selectedTab = this.tabs.find(tab => tab.path === this.$route.path);\n    if (selectedTab) {\n      this.activeTab = this.tabs.indexOf(selectedTab);\n    }\n    if (this.$route.path !== '/application') {\n      // Если текущий маршрут не \"/application\", перенаправляем пользователя на него\n      this.$router.push({\n        path: '/application',\n        replace: true\n      });\n    } else {\n      // Если текущий маршрут \"/application\", загружаем список заявок\n      this.$store.dispatch('fetchOrdersList');\n    }\n  },\n  watch: {\n    activeTab(newVal) {\n      const selectedTab = this.tabs[newVal];\n      if (selectedTab && selectedTab.path) {\n        this.$router.replace({\n          path: selectedTab.path\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["MyApplications","MyAccounts","OrderDetails","data","activeTab","tabs","label","component","path","methods","navigateToOrder","item","existingTabIndex","findIndex","tab","includes","num","newTabLabel","newTabKey","orderId","push","key","length","beforeRouteLeave","to","from","next","startsWith","created","selectedTab","find","$route","indexOf","$router","replace","$store","dispatch","watch","newVal"],"sources":["src/components/AppTabs.vue"],"sourcesContent":["<template>\n  <v-app>\n    <div class=\"mx-16\">\n      <v-tabs v-model=\"activeTab\" background-color=\"transparent\" color=\"basil\" grow>\n        <v-tab v-for=\"tab in tabs\" :key=\"tab.label\">{{ tab.label }}</v-tab>\n      </v-tabs>\n\n      <v-tabs-items v-model=\"activeTab\">\n        <v-tab-item v-for=\"(tab, index) in tabs\" :key=\"index\">\n          <component :is=\"tab.component\" :data=\"tab.data\" @select-order=\"navigateToOrder\" />\n        </v-tab-item>\n      </v-tabs-items>\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport MyApplications from '@/components/MyApplications.vue';\nimport MyAccounts from '@/components/MyAccounts.vue';\nimport OrderDetails from '@/components/OrderDetails.vue';\n\n\nexport default {\n  data() {\n    return {\n      activeTab: 0,\n      tabs: [\n        { label: 'Заявки', component: MyApplications, path: '/application' },\n        { label: 'Счета', component: MyAccounts, path: '/accounts' }\n      ],\n    };\n  },\n  methods: {\n    navigateToOrder(item) {\n      const existingTabIndex = this.tabs.findIndex(tab => tab.label.includes(item.num));\n      if (existingTabIndex !== -1) {\n        this.activeTab = existingTabIndex;\n      } else {\n        const newTabLabel = 'Детали заявки ' + item.num;\n        const newTabKey = newTabLabel + '-' + item.orderId; // Adding orderId to ensure uniqueness\n        this.tabs.push({ label: newTabLabel, component: OrderDetails, path: '/application/' + item.orderId, key: newTabKey });\n        this.activeTab = this.tabs.length - 1;\n\n      }\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    if (to.path.startsWith('/application/') && from.path !== to.path) {\n      // Если новый маршрут начинается с '/application/' и он отличается от предыдущего маршрута\n      next({ path: '/application' }); // Сбрасываем маршрут до основного пути '/application'\n    } else {\n      next(); // Продолжаем нормальный переход\n    }\n  },\n  created() {\n    const selectedTab = this.tabs.find(tab => tab.path === this.$route.path);\n    if (selectedTab) {\n      this.activeTab = this.tabs.indexOf(selectedTab);\n    }\n    if (this.$route.path !== '/application') {\n      // Если текущий маршрут не \"/application\", перенаправляем пользователя на него\n      this.$router.push({ path: '/application', replace: true });\n    } else {\n      // Если текущий маршрут \"/application\", загружаем список заявок\n      this.$store.dispatch('fetchOrdersList');\n    }\n  },\n  watch: {\n    activeTab(newVal) {\n      const selectedTab = this.tabs[newVal];\n      if (selectedTab && selectedTab.path) {\n        this.$router.replace({ path: selectedTab.path });\n      }\n    },\n  }\n};\n</script>\n"],"mappings":";AAiBA,OAAAA,cAAA;AACA,OAAAC,UAAA;AACA,OAAAC,YAAA;AAGA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,IAAA,GACA;QAAAC,KAAA;QAAAC,SAAA,EAAAP,cAAA;QAAAQ,IAAA;MAAA,GACA;QAAAF,KAAA;QAAAC,SAAA,EAAAN,UAAA;QAAAO,IAAA;MAAA;IAEA;EACA;EACAC,OAAA;IACAC,gBAAAC,IAAA;MACA,MAAAC,gBAAA,QAAAP,IAAA,CAAAQ,SAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAR,KAAA,CAAAS,QAAA,CAAAJ,IAAA,CAAAK,GAAA;MACA,IAAAJ,gBAAA;QACA,KAAAR,SAAA,GAAAQ,gBAAA;MACA;QACA,MAAAK,WAAA,sBAAAN,IAAA,CAAAK,GAAA;QACA,MAAAE,SAAA,GAAAD,WAAA,SAAAN,IAAA,CAAAQ,OAAA;QACA,KAAAd,IAAA,CAAAe,IAAA;UAAAd,KAAA,EAAAW,WAAA;UAAAV,SAAA,EAAAL,YAAA;UAAAM,IAAA,oBAAAG,IAAA,CAAAQ,OAAA;UAAAE,GAAA,EAAAH;QAAA;QACA,KAAAd,SAAA,QAAAC,IAAA,CAAAiB,MAAA;MAEA;IACA;EACA;EACAC,iBAAAC,EAAA,EAAAC,IAAA,EAAAC,IAAA;IACA,IAAAF,EAAA,CAAAhB,IAAA,CAAAmB,UAAA,qBAAAF,IAAA,CAAAjB,IAAA,KAAAgB,EAAA,CAAAhB,IAAA;MACA;MACAkB,IAAA;QAAAlB,IAAA;MAAA;IACA;MACAkB,IAAA;IACA;EACA;EACAE,QAAA;IACA,MAAAC,WAAA,QAAAxB,IAAA,CAAAyB,IAAA,CAAAhB,GAAA,IAAAA,GAAA,CAAAN,IAAA,UAAAuB,MAAA,CAAAvB,IAAA;IACA,IAAAqB,WAAA;MACA,KAAAzB,SAAA,QAAAC,IAAA,CAAA2B,OAAA,CAAAH,WAAA;IACA;IACA,SAAAE,MAAA,CAAAvB,IAAA;MACA;MACA,KAAAyB,OAAA,CAAAb,IAAA;QAAAZ,IAAA;QAAA0B,OAAA;MAAA;IACA;MACA;MACA,KAAAC,MAAA,CAAAC,QAAA;IACA;EACA;EACAC,KAAA;IACAjC,UAAAkC,MAAA;MACA,MAAAT,WAAA,QAAAxB,IAAA,CAAAiC,MAAA;MACA,IAAAT,WAAA,IAAAA,WAAA,CAAArB,IAAA;QACA,KAAAyB,OAAA,CAAAC,OAAA;UAAA1B,IAAA,EAAAqB,WAAA,CAAArB;QAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}