{"ast":null,"code":"import moment from 'moment';\nexport default {\n  props: {\n    dialog: {\n      type: Boolean,\n      required: true\n    },\n    editedItem: {\n      type: Object,\n      required: true\n    },\n    dialogTitle: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      menu2: false,\n      internalDialog: this.dialog,\n      localEditedItem: Object.assign({}, this.editedItem),\n      statusOptions: ['init', 'error', 'upload_docs', 'process', 'reupload_fls'],\n      rules: {\n        counter: value => value.length <= 8 || 'Максимум 8 символов',\n        numIfNonEmpty: value => {\n          const pattern = /^[0-9]+$/;\n          return value === '' || pattern.test(value) || 'Недопустимый номер заявки. Используйте только цифры';\n        },\n        max20Characters: value => value.length <= 20 || 'Максимум 20 символов',\n        stgCheck: value => {\n          const pattern = /^[a-zA-Zа-яА-Я.'\"0-9\\s]+$/;\n          return value === '' || pattern.test(value) || 'Используйте цифры (0-9) или буквы (a-z, A-Z, а-я, А-Я). Максимум 20 символов.';\n        },\n        client_nameCheck: value => {\n          const pattern = /^[a-zA-Zа-яА-Я\\s.'\"0-9]+$/;\n          return value === '' || value.length <= 30 && pattern.test(value) || 'Используйте цифры (0-9) или буквы (a-z, A-Z, а-я, А-Я). Максимум 30 символов.';\n        },\n        personPhoneCheck: value => {\n          const pattern = /^[0-9]+$/;\n          return value === '' || value.length === 11 && pattern.test(value) || 'Недопустимый номер телефона. Должен содержать ровно 11 цифр.';\n        }\n      }\n    };\n  },\n  watch: {\n    dialog(val) {\n      this.internalDialog = val;\n    },\n    editedItem(val) {\n      this.localEditedItem = Object.assign({}, val);\n    }\n  },\n  methods: {\n    saveLocalItem() {\n      if (this.$refs.form.validate()) {\n        if (!moment(this.localEditedItem.dadd).isValid()) {\n          this.localEditedItem.dadd = moment().format('YYYY-MM-DD HH:mm');\n        } else {\n          this.localEditedItem.dadd = moment(this.localEditedItem.dadd).format('YYYY-MM-DD HH:mm');\n        }\n        this.$emit('save', this.localEditedItem);\n        this.closeDialog();\n      }\n    },\n    closeDialog() {\n      this.internalDialog = false;\n      this.$emit('close');\n    }\n  }\n};","map":{"version":3,"names":["moment","props","dialog","type","Boolean","required","editedItem","Object","dialogTitle","String","data","menu2","internalDialog","localEditedItem","assign","statusOptions","rules","counter","value","length","numIfNonEmpty","pattern","test","max20Characters","stgCheck","client_nameCheck","personPhoneCheck","watch","val","methods","saveLocalItem","$refs","form","validate","dadd","isValid","format","$emit","closeDialog"],"sources":["src/components/DialogEditCreate.vue"],"sourcesContent":["<template>\n  <v-dialog v-model=\"internalDialog\" max-width=\"600px\">\n    <v-card>\n      <v-card-title>{{ dialogTitle }}</v-card-title>\n      <v-card-text>\n        <v-form ref=\"form\">\n          <v-text-field v-model=\"localEditedItem.num\" :rules=\"[rules.counter, rules.numIfNonEmpty]\"\n            label=\"№ Заявки\" required></v-text-field>\n          <v-text-field v-model=\"localEditedItem.stg\" :rules=\"[rules.stgCheck, rules.max20Characters]\"\n            label=\"Продукт\" required></v-text-field>\n          <v-row>\n            <v-col cols=\"12\" sm=\"6\" md=\"4\">\n              <v-menu v-model=\"menu2\" :close-on-content-click=\"false\" :nudge-right=\"40\" transition=\"scale-transition\"\n                offset-y min-width=\"auto\">\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field v-model=\"localEditedItem.dadd\" label=\"Дата\" prepend-icon=\"mdi-calendar\" readonly\n                    v-bind=\"attrs\" v-on=\"on\"></v-text-field>\n                </template>\n                <v-date-picker v-model=\"localEditedItem.dadd\" @input=\"menu2 = false\"></v-date-picker>\n              </v-menu>\n            </v-col>\n          </v-row>\n          <v-text-field v-model=\"localEditedItem.client_name\" :rules=\"[rules.client_nameCheck]\"\n            label=\"Клиент\" required></v-text-field>\n          <v-row>\n            <v-col class=\"d-flex\" cols=\"12\" sm=\"6\">\n              <v-select v-model=\"localEditedItem.state\" :items=\"statusOptions\" label=\"Статус\"></v-select>\n            </v-col>\n          </v-row>\n          <v-text-field v-model=\"localEditedItem.person_phone\" :rules=\"[rules.personPhoneCheck]\"\n            label=\"Телефон\" required></v-text-field>\n        </v-form>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn color=\"blue darken-1\" text @click=\"closeDialog\">Отмена</v-btn>\n        <v-btn color=\"blue darken-1\" text @click=\"saveLocalItem\">Сохранить</v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport moment from 'moment';\n\nexport default {\n  props: {\n    dialog: {\n      type: Boolean,\n      required: true\n    },\n    editedItem: {\n      type: Object,\n      required: true\n    },\n    dialogTitle: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      menu2: false,\n      internalDialog: this.dialog,\n      localEditedItem: Object.assign({}, this.editedItem),\n      statusOptions: [\n        'init',\n        'error',\n        'upload_docs',\n        'process',\n        'reupload_fls'\n      ],\n      rules: {\n        counter: value => value.length <= 8 || 'Максимум 8 символов',\n        numIfNonEmpty: value => {\n          const pattern = /^[0-9]+$/;\n          return value === '' || pattern.test(value) || 'Недопустимый номер заявки. Используйте только цифры';\n        },\n        max20Characters: value => value.length <= 20 || 'Максимум 20 символов',\n        stgCheck: value => {\n          const pattern = /^[a-zA-Zа-яА-Я.'\"0-9\\s]+$/;\n          return value === '' || pattern.test(value) || 'Используйте цифры (0-9) или буквы (a-z, A-Z, а-я, А-Я). Максимум 20 символов.';\n        },\n        client_nameCheck: value => {\n          const pattern = /^[a-zA-Zа-яА-Я\\s.'\"0-9]+$/;\n          return value === '' || (value.length <= 30 && pattern.test(value)) || 'Используйте цифры (0-9) или буквы (a-z, A-Z, а-я, А-Я). Максимум 30 символов.';\n        },\n        personPhoneCheck: value => {\n          const pattern = /^[0-9]+$/;\n          return value === '' || (value.length === 11 && pattern.test(value)) || 'Недопустимый номер телефона. Должен содержать ровно 11 цифр.';\n        }\n      }\n    };\n  },\n  watch: {\n    dialog(val) {\n      this.internalDialog = val;\n    },\n    editedItem(val) {\n      this.localEditedItem = Object.assign({}, val);\n    }\n  },\n  methods: {\n    saveLocalItem() {\n      if (this.$refs.form.validate()) {\n        if (!moment(this.localEditedItem.dadd).isValid()) {\n          this.localEditedItem.dadd = moment().format('YYYY-MM-DD HH:mm');\n        } else {\n          this.localEditedItem.dadd = moment(this.localEditedItem.dadd).format('YYYY-MM-DD HH:mm');\n        }\n        this.$emit('save', this.localEditedItem);\n        this.closeDialog();\n      }\n    },\n    closeDialog() {\n      this.internalDialog = false;\n      this.$emit('close');\n    }\n  }\n};\n</script>\n\n<style scoped>\n.mr-2 {\n  margin-right: 0.5rem;\n}\n</style>\n"],"mappings":"AA2CA,OAAAA,MAAA;AAEA;EACAC,KAAA;IACAC,MAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,QAAA;IACA;IACAC,UAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,QAAA;IACA;IACAG,WAAA;MACAL,IAAA,EAAAM,MAAA;MACAJ,QAAA;IACA;EACA;EACAK,KAAA;IACA;MACAC,KAAA;MACAC,cAAA,OAAAV,MAAA;MACAW,eAAA,EAAAN,MAAA,CAAAO,MAAA,UAAAR,UAAA;MACAS,aAAA,GACA,QACA,SACA,eACA,WACA,eACA;MACAC,KAAA;QACAC,OAAA,EAAAC,KAAA,IAAAA,KAAA,CAAAC,MAAA;QACAC,aAAA,EAAAF,KAAA;UACA,MAAAG,OAAA;UACA,OAAAH,KAAA,WAAAG,OAAA,CAAAC,IAAA,CAAAJ,KAAA;QACA;QACAK,eAAA,EAAAL,KAAA,IAAAA,KAAA,CAAAC,MAAA;QACAK,QAAA,EAAAN,KAAA;UACA,MAAAG,OAAA;UACA,OAAAH,KAAA,WAAAG,OAAA,CAAAC,IAAA,CAAAJ,KAAA;QACA;QACAO,gBAAA,EAAAP,KAAA;UACA,MAAAG,OAAA;UACA,OAAAH,KAAA,WAAAA,KAAA,CAAAC,MAAA,UAAAE,OAAA,CAAAC,IAAA,CAAAJ,KAAA;QACA;QACAQ,gBAAA,EAAAR,KAAA;UACA,MAAAG,OAAA;UACA,OAAAH,KAAA,WAAAA,KAAA,CAAAC,MAAA,WAAAE,OAAA,CAAAC,IAAA,CAAAJ,KAAA;QACA;MACA;IACA;EACA;EACAS,KAAA;IACAzB,OAAA0B,GAAA;MACA,KAAAhB,cAAA,GAAAgB,GAAA;IACA;IACAtB,WAAAsB,GAAA;MACA,KAAAf,eAAA,GAAAN,MAAA,CAAAO,MAAA,KAAAc,GAAA;IACA;EACA;EACAC,OAAA;IACAC,cAAA;MACA,SAAAC,KAAA,CAAAC,IAAA,CAAAC,QAAA;QACA,KAAAjC,MAAA,MAAAa,eAAA,CAAAqB,IAAA,EAAAC,OAAA;UACA,KAAAtB,eAAA,CAAAqB,IAAA,GAAAlC,MAAA,GAAAoC,MAAA;QACA;UACA,KAAAvB,eAAA,CAAAqB,IAAA,GAAAlC,MAAA,MAAAa,eAAA,CAAAqB,IAAA,EAAAE,MAAA;QACA;QACA,KAAAC,KAAA,cAAAxB,eAAA;QACA,KAAAyB,WAAA;MACA;IACA;IACAA,YAAA;MACA,KAAA1B,cAAA;MACA,KAAAyB,KAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}