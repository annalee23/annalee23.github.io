{"ast":null,"code":"import { mapMutations, mapState } from 'vuex';\nimport moment from 'moment';\nexport default {\n  data: () => ({\n    menu: false,\n    dialog: false,\n    dialogDelete: false,\n    dialogTitle: \"Создать заявку\",\n    headers: [{\n      text: '№ Заявки',\n      value: 'num'\n    }, {\n      text: 'Продукт',\n      value: 'stg'\n    }, {\n      text: 'Дата',\n      value: 'dadd'\n    }, {\n      text: 'Клиент',\n      value: 'client_name'\n    }, {\n      text: 'Статус',\n      value: 'state'\n    }, {\n      text: 'Телефон',\n      value: 'person_phone'\n    }],\n    editedIndex: -1,\n    editedItem: {\n      num: 0,\n      stg: [\"ACCOPEN\"],\n      dadd: formatDate(\"2021-06-24T14:28:14.237\"),\n      client_name: \"\",\n      state: \"init\",\n      person_phone: \"\"\n    },\n    defaultItem: {\n      num: 0,\n      stg: [],\n      dadd: formatDate(\"2021-06-24T14:28:14.237\"),\n      client_name: \" \",\n      state: \"init\",\n      person_phone: \"\"\n    }\n  }),\n  computed: {\n    ...mapState(['ordersList'])\n  },\n  methods: {\n    ...mapMutations(['addNewItem']),\n    formatDate(date) {\n      return moment(date).format('DD.MM.YYYY HH:mm');\n    },\n    statusClass(status) {\n      return {\n        'status-init': status === 'init',\n        'status-error': status === 'error',\n        'status-upload_docs': status === 'upload_docs',\n        'status-process': status === 'process',\n        'status-reupload_fls': status === 'reupload_fls'\n      };\n    },\n    selectOrder(orderId) {\n      this.$emit('select-order', orderId);\n    },\n    openDialog() {\n      this.dialog = true;\n    },\n    closeDialog() {\n      this.dialog = false;\n      //this.$refs.form.reset();\n    },\n    saveItem() {\n      if (this.$refs.form.validate()) {\n        if (this.editedItem.id) {\n          // Редактирование существующей заявки\n          // Реализуйте логику редактирования заявки\n        } else {\n          // Создание новой заявки\n          this.addNewItem(this.editedItem);\n        }\n        this.closeDialog();\n      }\n    }\n  },\n  mounted() {\n    this.$store.dispatch('fetchOrdersList');\n  }\n};","map":{"version":3,"names":["mapMutations","mapState","moment","data","menu","dialog","dialogDelete","dialogTitle","headers","text","value","editedIndex","editedItem","num","stg","dadd","formatDate","client_name","state","person_phone","defaultItem","computed","methods","date","format","statusClass","status","selectOrder","orderId","$emit","openDialog","closeDialog","saveItem","$refs","form","validate","id","addNewItem","mounted","$store","dispatch"],"sources":["src/components/MyApplications.vue"],"sourcesContent":["<template>\n  <div class=\"mx-1\">\n    <v-data-table :headers=\"headers\" :items=\"ordersList\" class=\"elevation-1\">\n      <template v-slot:top>\n        <v-toolbar flat>\n          <h2>Список заявок</h2>\n          <v-spacer></v-spacer>\n          <v-btn class=\"my-4\" color=\"primary\" @click=\"openDialog()\">Добавить заявку</v-btn>\n        </v-toolbar>\n      </template>\n      <template #[`item.stg`]=\"{ item }\">\n        <span>{{ item.stg.join(', ') }}</span>\n      </template>\n      <template #[`item.dadd`]=\"{ item }\">\n        <span>{{ formatDate(item.dadd) }}</span>\n      </template>\n      <template #[`item.state`]=\"{ item }\">\n        <span :class=\"statusClass(item.state)\">{{ item.state }}</span>\n      </template>\n      <template #[`item.num`]=\"{ item }\">\n        <div @click=\"selectOrder(item.id)\" style=\"cursor: pointer;\">\n          {{ item.num }}\n        </div>\n      </template>\n    </v-data-table>\n    <v-dialog v-model=\"dialog\" max-width=\"600px\">\n      <v-card>\n        <v-card-title>\n          {{ dialogTitle }}\n        </v-card-title>\n        <v-card-text>\n          <v-form ref=\"form\">\n            <v-text-field v-model=\"editedItem.num\" label=\"№ Заявки\"></v-text-field>\n            <v-text-field v-model=\"editedItem.stg\" label=\"Продукт\"></v-text-field>\n            <v-row>\n            <v-col cols=\"12\" sm=\"6\" md=\"4\">\n              <v-menu\n                ref=\"menu\"\n                v-model=\"menu\"\n                :close-on-content-click=\"false\"\n                :return-value.sync=\"editedItem.dadd\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"auto\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field\n                    v-model=\"editedItem.dadd\"\n                    label=\"Дата\"\n                    prepend-icon=\"mdi-calendar\"\n                    readonly\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  ></v-text-field>\n                </template>\n                <v-date-picker\n                  v-model=\"editedItem.dadd\"\n                  no-title\n                  scrollable\n                >\n                  <v-spacer></v-spacer>\n                  <v-btn\n                    text\n                    color=\"primary\"\n                    @click=\"menu = false\"\n                  >\n                    Отмена\n                  </v-btn>\n                  <v-btn\n                    text\n                    color=\"primary\"\n                    @click=\"$refs.menu.save(editedItem.dadd)\"\n                  >\n                    OK\n                  </v-btn>\n                </v-date-picker>\n              </v-menu>\n            </v-col>\n          </v-row>            <v-text-field v-model=\"editedItem.client_name\" label=\"Клиент\"></v-text-field>\n            <v-text-field v-model=\"editedItem.person_phone\" label=\"Телефон\"></v-text-field>\n          </v-form>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"closeDialog\">Отмена</v-btn>\n          <v-btn color=\"blue darken-1\" text @click=\"saveItem\">Сохранить</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapMutations, mapState } from 'vuex';\nimport moment from 'moment';\n\n\nexport default {\n  data: () => ({\n    menu: false,\n    dialog: false,\n    dialogDelete: false,\n    dialogTitle: \"Создать заявку\",\n    headers: [\n      { text: '№ Заявки', value: 'num' },\n      { text: 'Продукт', value: 'stg' },\n      { text: 'Дата', value: 'dadd' },\n      { text: 'Клиент', value: 'client_name' },\n      { text: 'Статус', value: 'state' },\n      { text: 'Телефон', value: 'person_phone' }\n    ],\n    editedIndex: -1,\n    editedItem: {\n      num: 0,\n      stg: [\"ACCOPEN\"],\n      dadd: formatDate(\"2021-06-24T14:28:14.237\"),\n      client_name: \"\",\n      state: \"init\",\n      person_phone: \"\"\n    },\n    defaultItem: {\n      num: 0,\n      stg: [],\n      dadd: formatDate(\"2021-06-24T14:28:14.237\"),\n      client_name: \" \",\n      state: \"init\",\n      person_phone: \"\"\n    },\n  }),\n  computed: {\n    ...mapState(['ordersList']),\n  },\n  methods: {\n    ...mapMutations(['addNewItem']),\n    formatDate(date) {\n      return moment(date).format('DD.MM.YYYY HH:mm');\n    },\n    statusClass(status) {\n      return {\n        'status-init': status === 'init',\n        'status-error': status === 'error',\n        'status-upload_docs': status === 'upload_docs',\n        'status-process': status === 'process',\n        'status-reupload_fls': status === 'reupload_fls',\n      };\n    },\n    selectOrder(orderId) {\n      this.$emit('select-order', orderId);\n    \n  },\n    openDialog() {\n      this.dialog = true;\n    },\n    closeDialog() {\n      this.dialog = false;\n      //this.$refs.form.reset();\n    },\n    saveItem() {\n      if (this.$refs.form.validate()) {\n        if (this.editedItem.id) {\n          // Редактирование существующей заявки\n          // Реализуйте логику редактирования заявки\n        } else {\n          // Создание новой заявки\n          this.addNewItem(this.editedItem);\n        }\n        this.closeDialog();\n      }\n    },\n  },\n  mounted() {\n    this.$store.dispatch('fetchOrdersList');\n  }\n};\n</script>\n\n<style scoped>\nh2 {\n  margin-bottom: 20px;\n  text-align: center;\n}\n\n.v-data-footer {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.v-data-footer__pagination,\n.v-data-footer__select {\n  margin-left: auto;\n}\n\n.status-init {\n  color: #ff6f00;\n  /* Ярко-оранжевый */\n  font-weight: bold;\n  padding: 5px;\n}\n\n.status-error {\n  color: #d32f2f;\n  /* Ярко-красный */\n  font-weight: bold;\n  padding: 5px;\n}\n\n.status-upload_docs {\n  color: #0288d1;\n  /* Ярко-голубой */\n  font-weight: bold;\n  padding: 5px;\n}\n\n.status-process {\n  color: #388e3c;\n  /* Ярко-зеленый */\n  font-weight: bold;\n  padding: 5px;\n}\n\n.status-reupload_fls {\n  color: #7b1fa2;\n  /* Ярко-фиолетовый */\n  font-weight: bold;\n  padding: 5px;\n}\n\ntr:hover {\n  background-color: #f5f5f5;\n  /* Светло-серый */\n}\n</style>"],"mappings":"AA6FA,SAAAA,YAAA,EAAAC,QAAA;AACA,OAAAC,MAAA;AAGA;EACAC,IAAA,EAAAA,CAAA;IACAC,IAAA;IACAC,MAAA;IACAC,YAAA;IACAC,WAAA;IACAC,OAAA,GACA;MAAAC,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,GACA;MAAAD,IAAA;MAAAC,KAAA;IAAA,EACA;IACAC,WAAA;IACAC,UAAA;MACAC,GAAA;MACAC,GAAA;MACAC,IAAA,EAAAC,UAAA;MACAC,WAAA;MACAC,KAAA;MACAC,YAAA;IACA;IACAC,WAAA;MACAP,GAAA;MACAC,GAAA;MACAC,IAAA,EAAAC,UAAA;MACAC,WAAA;MACAC,KAAA;MACAC,YAAA;IACA;EACA;EACAE,QAAA;IACA,GAAApB,QAAA;EACA;EACAqB,OAAA;IACA,GAAAtB,YAAA;IACAgB,WAAAO,IAAA;MACA,OAAArB,MAAA,CAAAqB,IAAA,EAAAC,MAAA;IACA;IACAC,YAAAC,MAAA;MACA;QACA,eAAAA,MAAA;QACA,gBAAAA,MAAA;QACA,sBAAAA,MAAA;QACA,kBAAAA,MAAA;QACA,uBAAAA,MAAA;MACA;IACA;IACAC,YAAAC,OAAA;MACA,KAAAC,KAAA,iBAAAD,OAAA;IAEA;IACAE,WAAA;MACA,KAAAzB,MAAA;IACA;IACA0B,YAAA;MACA,KAAA1B,MAAA;MACA;IACA;IACA2B,SAAA;MACA,SAAAC,KAAA,CAAAC,IAAA,CAAAC,QAAA;QACA,SAAAvB,UAAA,CAAAwB,EAAA;UACA;UACA;QAAA,CACA;UACA;UACA,KAAAC,UAAA,MAAAzB,UAAA;QACA;QACA,KAAAmB,WAAA;MACA;IACA;EACA;EACAO,QAAA;IACA,KAAAC,MAAA,CAAAC,QAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}